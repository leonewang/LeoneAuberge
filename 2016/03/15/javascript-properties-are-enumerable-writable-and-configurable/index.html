<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Javascript Properties Are Enumerable Writable and Configurable · Leone Auberge</title><meta name="description" content="Javascript Properties Are Enumerable Writable and Configurable - LeoneWang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Javascript Properties Are Enumerable Writable and Configurable</h1><div class="post-info">Mar 15, 2016<span style="margin-left:0.5rem;">|</span><a href="http://arqex.com/967/javascript-properties-enumerable-writable-configurable#comments" class="post-from">original source</a></div><div class="post-content"><p>对象是 Javascript 中的核心部分。对象所使用的 JS 语句也非常简洁易用，自然也能轻松地创建对象或 hashmaps 类型的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明对象 ob</span></span><br><span class="line"><span class="keyword">var</span> ob = &#123;a: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 访问 ob 的属性 a</span></span><br><span class="line">ob.a; <span class="comment">// =&gt; 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改 a 属性值</span></span><br><span class="line">ob.a = <span class="number">0</span>;</span><br><span class="line">ob.a; <span class="comment">// =&gt; 0;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加一个新属性 b</span></span><br><span class="line">ob.b = <span class="number">2</span>;</span><br><span class="line">ob.b; <span class="comment">// =&gt; 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除属性 b</span></span><br><span class="line"><span class="keyword">delete</span> ob.b;</span><br><span class="line">ob.b; <span class="comment">// =&gt; undefined</span></span><br></pre></td></tr></table></figure>
<p>看上去很简单，但是容易让人忽略的是上面例子中对象属性所含有的三种特性：可枚举性、可写性和可配置性。</p>
<a id="more"></a>
<ul>
<li>可枚举性 - <strong>Enumerable</strong>：表示能否通过 <code>for...in</code> 循环返回所有属性，且 <code>Object.keys</code> 语句能够返回对象属性的所有 key。</li>
<li>可写性 - <strong>Writable</strong>：表示能否修改属性值。</li>
<li>可配置性 - <strong>Configurable</strong>：表示能否通过 <code>delete</code> 操作符删除属性从而重新定义属性，能否修改属性的这三个特性。</li>
</ul>
<p>很多人都知道 <code>Object</code> 属性中的前两个特性，可枚举性和可写性，但是却很少有人知道最后一个 <strong>可配置性</strong>，这个特性让我们可以使用 <code>Object</code> 的 <code>defineProperty</code> 方法来 <strong>重新定义对象的这三个特性</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用 Object.defineProperty 方法给 ob 添加一个 c 属性</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'c'</span>, &#123;</span><br><span class="line">  value: <span class="number">3</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span>,</span><br><span class="line">  writable: <span class="literal">false</span>,</span><br><span class="line">  configurable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ob.c; <span class="comment">// =&gt; 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor( ob, <span class="string">'c'</span> );</span><br><span class="line"><span class="comment">// =&gt; &#123;value: 3, enumerable: false, writable: false, configurable: false&#125;</span></span><br></pre></td></tr></table></figure>
<div class="tip"><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configurable: <span class="literal">false</span>; <span class="comment">// 一旦把特性定义为不可配置，就不能再修改为可配置</span></span><br></pre></td></tr></table></figure><br><br></div>

<p>虽然使用句式并不简洁，但是这些特性在实现一些特殊需求时往往能屡试不爽！定义这些特性的对象被称为描述符 <code>descriptor</code>，你可以使用 <code>Object.getOwnPropertyDescriptor</code> 方法来获得任何特性的描述符对象，如上例中使用该方法获得了一个描述符对象，该对象中包含四条数据属性：value、enumerable、writable、configurable。</p>
<p><strong>当给属性进行赋值时，该属性默认的三个特性均为</strong> <code>false</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'a'</span>, &#123;value: <span class="number">0</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(ob, <span class="string">'a'</span>);</span><br><span class="line"><span class="comment">// =&gt; Object &#123;value: 0, writable: false, enumerable: false, configurable: false&#125;</span></span><br></pre></td></tr></table></figure>
<p>我们也可以在创建对象时使用 <code>Object,create(prototype, properties)</code> 方法来定义它的属性，不过需要一个描述器对象来作为它的第二个参数，示例如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = <span class="built_in">Object</span>.create(<span class="built_in">Object</span>.prototype, &#123;</span><br><span class="line">  a: &#123; writable:<span class="literal">true</span>, enumerable:<span class="literal">true</span>, value: <span class="number">1</span> &#125;,</span><br><span class="line">  b: &#123; enumerable: <span class="literal">true</span>, value: <span class="number">2</span> &#125;</span><br><span class="line">&#125;&#125;);</span><br><span class="line"></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;a:1, b:2&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象的不可枚举性-non-enumerable"><a href="#对象的不可枚举性-non-enumerable" class="headerlink" title="对象的不可枚举性 | non-enumerable"></a>对象的不可枚举性 | non-enumerable</h2><p>前面说到过可枚举性表示能够通过 <code>for...in</code> 循环返回所有属性，而不可枚举性自然相反。所以，拥有不可枚举性的属性无法使用关于操作 hashmap 型对象的大部分方法。</p>
<ul>
<li>无法参与 <code>for...in</code> 循环的迭代</li>
<li>不会在使用了 <code>Object.keys</code> 的函数中出现</li>
<li>无法通过 <code>JSON.stringify</code> 进行序列化</li>
</ul>
<p>虽然这三种特性是隐藏变量，但是我们依旧能够直接访问。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;a:<span class="number">1</span>, b:<span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line">ob.c = <span class="number">3</span>;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'d'</span>, &#123;</span><br><span class="line">  value: <span class="number">4</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ob.d; <span class="comment">// =&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> ob ) <span class="built_in">console</span>.log( ob[key] );</span><br><span class="line"><span class="comment">// 控制台输出</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys( ob );  <span class="comment">// =&gt; ["a", "b", "c"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify( ob ); <span class="comment">// =&gt; "&#123;a:1,b:2,c:3&#125;"</span></span><br><span class="line"></span><br><span class="line">ob.d; <span class="comment">// =&gt; 4</span></span><br></pre></td></tr></table></figure>
<p>因为对象无法被序列化，所以我们可以用来做些有意思的事情：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一辆汽车模型，其中包含一些必要信息</span></span><br><span class="line"><span class="keyword">var</span> car = &#123;</span><br><span class="line">  id: <span class="number">123</span>,</span><br><span class="line">  color: red,</span><br><span class="line">  owner: <span class="number">12</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 假设从数据库中获取到 id:12 的车主是 Javi</span></span><br><span class="line"><span class="keyword">var</span> owner = &#123;</span><br><span class="line"> id: <span class="number">12</span>,</span><br><span class="line"> name: Javi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给这辆车添加一个 ownerOb 属性</span></span><br><span class="line"><span class="comment">// 把数据库中查询到的数据添加进去，以后没准会用到</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( car, <span class="string">'ownerOb'</span>, &#123;value: owner&#125; );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 果然现在需要查询车主信息</span></span><br><span class="line">car.ownerOb; <span class="comment">// =&gt; &#123;id:12, name:Javi&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 序列化 car 对象后，车主 Javi 的信息不见了！</span></span><br><span class="line"><span class="built_in">JSON</span>.stringify( car ); <span class="comment">// =&gt; '&#123;id: 123, color: "red", owner: 12&#125;'</span></span><br></pre></td></tr></table></figure>
<p>所以 non-enumerable 在显示数据模型对象时大有裨益。</p>
<p>另外，可以通过 <code>Object.getOwnPropertyNames</code> 方法获得对象中的所有属性名。</p>
<h2 id="对象的不可写性-non-writable"><a href="#对象的不可写性-non-writable" class="headerlink" title="对象的不可写性 | non-writable"></a>对象的不可写性 | non-writable</h2><p>在 ES6 之前，对常量来说，<code>const</code> 的特性最接近于 non-writable。一旦值被定义，就无法改变。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;a: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'B'</span>, &#123;value: <span class="number">2</span>, writable:<span class="literal">false</span>&#125; );</span><br><span class="line"></span><br><span class="line">ob.B; <span class="comment">// =&gt; 2</span></span><br><span class="line"></span><br><span class="line">ob.B = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">ob.B; <span class="comment">// =&gt; 2</span></span><br></pre></td></tr></table></figure>
<p>上例中直接忽略了 ob.B 的重新赋值，<strong>需要注意的是，在重新赋值时，往往会直接返回该赋值</strong>。如果应用了 <code>strict mode</code> 的话，那么 ob.B 将会抛出 <code>TypeError</code>，而不是仅仅忽略写入的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;a: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'B'</span>, &#123;value: <span class="number">2</span>, writable:<span class="literal">false</span>&#125; );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 赋值时返回该值</span></span><br><span class="line">ob.B = <span class="number">6</span>; <span class="comment">// =&gt; 6</span></span><br><span class="line">ob.B = <span class="number">1000</span>; <span class="comment">// =&gt; 1000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 但是该属性值依旧未改变</span></span><br><span class="line">ob.B; =&gt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateB</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="pi">  'use strict'</span>;</span><br><span class="line">  ob.B = <span class="number">4</span>; <span class="comment">// 此处将抛出异常</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">updateB(); <span class="comment">// 果然抛出异常了吧 O__O</span></span><br></pre></td></tr></table></figure>
<p><strong>还需要注意的有，如果不可写的属性包含一个对象，虽然这个属性自身不可写，但是该对象中的属性却是可写的</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;a: <span class="number">1</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'OB'</span>, &#123;value: &#123;c:<span class="number">3</span>&#125;, writable:<span class="literal">false</span>&#125; );</span><br><span class="line"></span><br><span class="line">ob.OB.c = <span class="number">4</span>;</span><br><span class="line">ob.OB.d = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">ob.OB; <span class="comment">// =&gt; &#123;c:4, d:5&#125;</span></span><br><span class="line"></span><br><span class="line">ob.OB = <span class="string">'hola'</span>;</span><br><span class="line"></span><br><span class="line">ob.OB; <span class="comment">// =&gt; &#123;c:4, d:5&#125;</span></span><br></pre></td></tr></table></figure>
<p>如果想创建一个完全不可写的属性，使用<code>Object.freeze</code> 方法将阻止所有添加、删除、修改对象属性的操作，并且应用 <code>strict mode</code> 时将抛出 <code>TypeError</code> 异常。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123; a: <span class="number">1</span>, b: <span class="number">2</span> &#125;;</span><br><span class="line"></span><br><span class="line">ob.c = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze( ob ); <span class="comment">// =&gt; &#123;a:1,b:2,c:3&#125;</span></span><br><span class="line"></span><br><span class="line">ob.d = <span class="number">4</span>;</span><br><span class="line">ob.a = -<span class="number">10</span>;</span><br><span class="line"><span class="keyword">delete</span> ob.b;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( <span class="string">'ob'</span>, <span class="string">'e'</span>, &#123;value: <span class="number">5</span>&#125; );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有的更改都会被忽略</span></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;a:1,b:2,c:3&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象的不可配置性-non-configurable"><a href="#对象的不可配置性-non-configurable" class="headerlink" title="对象的不可配置性 | non-configurable"></a>对象的不可配置性 | non-configurable</h2><p>可配置性表示能否修改属性的特性，通过 <code>defineProperty</code> 方法修改属性的可枚举性和可写性，但是 <strong>如果属性定义的是不可配置性，你就只能将可写性修改成不可写性，其他的操作都将抛出 TypeError 异常</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'a'</span>, &#123;configurable:<span class="literal">false</span>, writable:<span class="literal">true</span>&#125; );</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'a'</span>, &#123; enumerable: <span class="literal">true</span> &#125;); <span class="comment">// throws a TypeError</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'a'</span>, &#123; value: <span class="number">12</span> &#125;); <span class="comment">// throws a TypeError</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'a'</span>, &#123; writable: <span class="literal">false</span> &#125;); <span class="comment">// 只有此操作能成功</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(ob, <span class="string">'a'</span>, &#123; writable: <span class="literal">true</span> &#125;); <span class="comment">// throws a TypeError</span></span><br></pre></td></tr></table></figure>
<p>还有非常重要的一点是: <strong>不可配置的属性无法通过对象的 <code>delete</code> 操作符进行删除</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ob = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'a'</span>, &#123;configurable: <span class="literal">true</span>, value: <span class="number">1</span>&#125; );</span><br><span class="line"></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;a:1&#125;</span></span><br><span class="line"><span class="keyword">delete</span> ob.a; <span class="comment">// =&gt; true</span></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty( ob, <span class="string">'a'</span>, &#123;configurable: <span class="literal">false</span>, value: <span class="number">1</span>&#125; );</span><br><span class="line"></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;a:1&#125;</span></span><br><span class="line"><span class="keyword">delete</span> ob.a; <span class="comment">// =&gt; false</span></span><br><span class="line">ob; <span class="comment">// =&gt; &#123;a:1&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="特殊的-var"><a href="#特殊的-var" class="headerlink" title="特殊的 var"></a>特殊的 var</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"hello"</span>;</span><br><span class="line"><span class="keyword">delete</span> a; <span class="comment">// =&gt; false</span></span><br><span class="line"></span><br><span class="line">b = <span class="string">"hi"</span>;</span><br><span class="line"><span class="keyword">delete</span> b; <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>不用感到奇怪，上面提到，不可配置的属性无法通过对象的 <code>delete</code> 操作符进行删除，所以不使用 <code>var</code> 定义变量的时候，变量的特性 configurable 的值为 true，可以使用 <code>delete</code> 对其操作。 使用 <code>var</code> 定义一个全局变量的时候，变量的特性 configurable 的值为 false，不可以使用 <code>delete</code> 对其操作。使用下面的代码验证之：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="built_in">window</span>, <span class="string">'a'</span>)</span><br><span class="line"><span class="comment">// =&gt; Object &#123;value: "hello", writable: true, enumerable: true, configurable: false&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="built_in">window</span>, <span class="string">'b'</span>)</span><br><span class="line"><span class="comment">// =&gt; Object &#123;value: "hi", writable: true, enumerable: true, configurable: true&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>Object.defineProperty</code> 在 ES5 中就已出现，我们可以用它来学习 Javascript 核心对象的工作原理，还可以用来自定义属性的 getters 和 setters。总之，这很有趣。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/04/28/prefixes-stems-and-suffixes-in-english-words/" class="prev">PREV</a><a href="/2016/01/26/directive-scope-binding-strategy-in-angularjs/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://leonewang.wang">LeoneWang</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>